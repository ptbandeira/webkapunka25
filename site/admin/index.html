<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex" />
    <title>Content Manager</title>
  </head>
  <body>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
    <script>
      CMS.registerPreviewStyle("/css/bootstrap.min.css");
      CMS.registerPreviewStyle("/style.css?v=footer-fix1");

      function h(tag, props, children){ return window.h(tag, props, children); }

      var HomePreview = createClass({
        render: function () {
          var entry = this.props.entry;
          var sections = entry.getIn(["data","sections"]) || [];

          function kids(list, mapFn){
            if (!list || !list.map) return [];
            var mapped = list.map(mapFn);
            return mapped && mapped.toArray ? mapped.toArray() : mapped;
          }
          function A(cls, kidsArr){
            return h("section-wrapper", { className: cls || "padding-xlarge" },
              h("div",{className:"container"}, kidsArr)
            );
          }

          return h("div", {}, kids(sections, function(s, i){
            var t = s.get ? s.get("type") : s.type;

            if (t==="hero") {
              var align = s.get("align");
              var cls = align==="center"?"text-center":align==="right"?"text-end":"";
              return A("padding-xlarge jarallax", [
                h("h1", {className: cls}, s.get("title")),
                s.get("subtitle") ? h("p", {}, s.get("subtitle")) : null,
                s.get("cta_label") ? h("a",{href:s.get("cta_link")||"#",className:"btn mt-2"}, s.get("cta_label")) : null
              ]);
            }
            if (t==="text") {
              return A(null, [
                s.get("heading") ? h("h3",{className:"py-3"}, s.get("heading")) : null,
                s.get("body") ? h("p",{}, s.get("body")) : null
              ]);
            }
            if (t==="productGrid") {
              return A("product-store", [
                h("div",{className:"display-header d-flex justify-content-between pb-4"},
                  [h("h3",{className:"mt-3"}, s.get("title")||"Products")]
                ),
                h("div",{className:"row"},
                  [1,2,3].map(function(n){return h("div",{className:"col-md-4 mb-4",key:n},
                    h("div",{className:"product-card text-center"},[
                      h("div",{className:"image-holder zoom-effect"}, h("div",{style:{background:"#eee",height:"200px"}})),
                      h("div",{className:"card-detail pt-3 pb-2"},[
                        h("h5",{},"Product"),
                        h("div",{className:"price"}, "€…")
                      ])
                    ])
                  );})
                )
              ]);
            }
            if (t==="faqs") {
              return A(null, [
                h("h3",{className:"text-center mb-5"}, s.get("title")||"FAQs"),
                h("div",{className:"accordion accordion-flush"},[
                  h("div",{className:"accordion-item"},
                    [h("h4",{className:"accordion-header"},
                      h("button",{className:"accordion-button collapsed",type:"button"},"Question")
                    ),
                    h("div",{className:"accordion-body"}, h("p",{},"Answer"))])
                ])
              ]);
            }
            if (t==="banner") {
              return h("section-wrapper",{className:"position-relative"},
                h("div",{className:"banner-content-text position-absolute"},
                  [h("h2",{}, s.get("heading")||"Banner"),
                   s.get("button_label") ? h("a",{href:s.get("button_link")||"#",className:"btn"}, s.get("button_label")):null]));
            }
            if (t==="video") {
              return A(null, [h("div",{className:"ratio ratio-16x9", style:{background:"#000"}})]);
            }
            return h("div",{},"Unknown section");
          }));
        }
      });

      CMS.registerPreviewTemplate("home", HomePreview);

      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", function(user) {
          if (!user) window.netlifyIdentity.on("login", function(){ document.location.href="/admin/"; });
        });
      }
    </script>
  </body>
</html>
